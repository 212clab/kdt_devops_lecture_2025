<?xml version="1.0" encoding="UTF-8"?>
<svg width="700" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="badGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ffcdd2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ef5350;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="goodGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#c8e6c9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#66bb6a;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="700" height="500" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="350" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#333">Dockerfile 최적화 전략</text>
  
  <!-- Bad Practice Section -->
  <g id="badPractice">
    <rect x="30" y="60" width="300" height="380" fill="url(#badGradient)" stroke="#d32f2f" stroke-width="2" rx="10"/>
    <text x="180" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#fff">❌ 비효율적인 방법</text>
    
    <!-- Bad Dockerfile steps -->
    <rect x="50" y="100" width="260" height="30" fill="#fff" stroke="#d32f2f" rx="5"/>
    <text x="60" y="120" font-family="monospace" font-size="11" fill="#333">FROM ubuntu:latest</text>
    
    <rect x="50" y="140" width="260" height="30" fill="#fff" stroke="#d32f2f" rx="5"/>
    <text x="60" y="160" font-family="monospace" font-size="11" fill="#333">RUN apt-get update</text>
    
    <rect x="50" y="180" width="260" height="30" fill="#fff" stroke="#d32f2f" rx="5"/>
    <text x="60" y="200" font-family="monospace" font-size="11" fill="#333">RUN apt-get install -y curl</text>
    
    <rect x="50" y="220" width="260" height="30" fill="#fff" stroke="#d32f2f" rx="5"/>
    <text x="60" y="240" font-family="monospace" font-size="11" fill="#333">COPY . /app</text>
    
    <rect x="50" y="260" width="260" height="30" fill="#fff" stroke="#d32f2f" rx="5"/>
    <text x="60" y="280" font-family="monospace" font-size="11" fill="#333">RUN npm install</text>
    
    <!-- Problems -->
    <text x="180" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">문제점:</text>
    <text x="60" y="340" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 많은 레이어 생성</text>
    <text x="60" y="355" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 캐시 비효율</text>
    <text x="60" y="370" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 큰 이미지 크기</text>
    <text x="60" y="385" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 보안 취약점</text>
    
    <!-- Size indicator -->
    <circle cx="280" cy="410" r="25" fill="#d32f2f"/>
    <text x="280" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">500MB</text>
  </g>
  
  <!-- Arrow -->
  <path d="M 340 250 L 360 250" stroke="#666" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="350" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">최적화</text>
  
  <!-- Good Practice Section -->
  <g id="goodPractice">
    <rect x="370" y="60" width="300" height="380" fill="url(#goodGradient)" stroke="#4caf50" stroke-width="2" rx="10"/>
    <text x="520" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#fff">✅ 최적화된 방법</text>
    
    <!-- Good Dockerfile steps -->
    <rect x="390" y="100" width="260" height="30" fill="#fff" stroke="#4caf50" rx="5"/>
    <text x="400" y="120" font-family="monospace" font-size="11" fill="#333">FROM node:18-alpine</text>
    
    <rect x="390" y="140" width="260" height="50" fill="#fff" stroke="#4caf50" rx="5"/>
    <text x="400" y="160" font-family="monospace" font-size="10" fill="#333">RUN apk update &amp;&amp; apk add curl \</text>
    <text x="400" y="175" font-family="monospace" font-size="10" fill="#333">    &amp;&amp; rm -rf /var/cache/apk/*</text>
    
    <rect x="390" y="200" width="260" height="30" fill="#fff" stroke="#4caf50" rx="5"/>
    <text x="400" y="220" font-family="monospace" font-size="11" fill="#333">COPY package*.json ./</text>
    
    <rect x="390" y="240" width="260" height="30" fill="#fff" stroke="#4caf50" rx="5"/>
    <text x="400" y="260" font-family="monospace" font-size="11" fill="#333">RUN npm ci --only=production</text>
    
    <rect x="390" y="280" width="260" height="30" fill="#fff" stroke="#4caf50" rx="5"/>
    <text x="400" y="300" font-family="monospace" font-size="11" fill="#333">COPY src/ ./src/</text>
    
    <!-- Benefits -->
    <text x="520" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">장점:</text>
    <text x="400" y="350" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 레이어 최적화</text>
    <text x="400" y="365" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 캐시 효율성</text>
    <text x="400" y="380" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 작은 이미지 크기</text>
    <text x="400" y="395" font-family="Arial, sans-serif" font-size="11" fill="#fff">• 보안 강화</text>
    
    <!-- Size indicator -->
    <circle cx="620" cy="410" r="25" fill="#4caf50"/>
    <text x="620" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">50MB</text>
  </g>
  
  <!-- Optimization techniques -->
  <rect x="50" y="460" width="600" height="30" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="5"/>
  <text x="350" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976d2">핵심 최적화 기법: 멀티스테이지 빌드 • 레이어 결합 • 캐시 최적화 • Alpine 이미지</text>
</svg>